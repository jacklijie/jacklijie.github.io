webpackJsonp([43],{Di2H:function(e,t,n){"use strict";function i(e){n("NFEZ")}Object.defineProperty(t,"__esModule",{value:!0});var a=n("NtYf"),r=n("++zo"),o=n("W9Ge"),s=n("ubGM"),l=n("wtEF"),c=n("4ypM"),m={name:"realName",data:function(){return{isShow:!1,subing:!1,urlObj:o.a.getUrlObj(),unWatchFun:null,isReal:!1,isFocusInput:!1,form:{lisenceType:"",lisenceTypeName:"",organizaName:"",operator:"",phone:"",lisenceCode:"",lisenceAddress:"",detail:""},slots:[{flex:1,defaultIndex:0,values:[],className:"slot1",value:""}],fromLogin:!1}},components:{areaCtrl:c.a},watch:{"form.lisenceType":function(e,t){0==e||1==e||2==e?document.querySelector("#operator").setAttribute("placeholder","请填写常用寄件人姓名"):document.querySelector("#operator").setAttribute("placeholder","请填写证件姓名")}},mounted:function(){this.init()},beforeRouteEnter:function(e,t,n){"/"!=t.fullPath&&l.a.commit(s.w,{loginBack:t.fullPath}),n()},methods:{init:function(){var e=this,t=[{name:"居民身份证",id:3},{name:"临时居民身份证",id:4},{name:"户口簿",id:5},{name:"中国人民解放军军人身份证件",id:6},{name:"中国人民武装警察身份证件",id:7},{name:"港澳居民来往内地通行证",id:8},{name:"台湾居民来往大陆通行证",id:9},{name:"外国公民护照",id:10},{name:"中国公民护照",id:11},{name:"港澳台居民居住证",id:12},{name:"组织机构代码",id:0},{name:"社会信用代码",id:1},{name:"税务登记证号",id:2}];this.slots[0].values=t,this.form.lisenceTypeName="居民身份证",this.form.lisenceType=3;var n=this.$store.state.lisenceObj;if(n){var i=JSON.parse(n);if(i.lisenceObj.realName)this.form=i.lisenceObj,this.isReal=!0;else{this.form.phone=this.$store.state.userInfo.phone,this.isReal=!1;var a=this.$store.state.lisenceTemp;a&&(this.form=a),this.watchForm()}}else this.findRealName();var r=t.filter(function(t){return t.name==e.form.lisenceTypeName});this.form.lisenceTypeName=r[0].name,t.forEach(function(t,n){r[0].name==t.name&&(e.slots[0].defaultIndex=n)});var o=this.$route.query;o.hasOwnProperty("fromlogin")&&o.fromlogin&&(this.fromLogin=!0)},findRealName:function(){var e=this;this.$ajax.post(r.a.findRealName,{openId:this.urlObj.openId},!0).then(function(t){t&&(e.$store.commit(s.t,{lisenceObj:t}),t.realName?(e.form=t,e.isReal=!0):(e.form.phone=e.$store.state.userInfo.phone,e.isReal=!1))}).catch(function(e){console.log(e.message||"服务繁忙，请稍后重试")})},validateNameInput:function(){var e=/^[\u4e00-\u9fa5\a-zA-Z\·]+$/g;return!(this.form.operator.trim()&&!e.test(this.form.operator.trim()))||(Object(a.Toast)("姓名只能输入汉字、字母和·"),!1)},validatejgNameInput:function(){var e=/^[\u4e00-\u9fa5]+$/g;return!(this.form.organizaName.trim()&&!e.test(this.form.organizaName.trim()))||(Object(a.Toast)("机构名称只能输入汉字"),!1)},validateCodeInput:function(){var e=this.form.lisenceCode.trim(),t=this.form.lisenceType,n=void 0;if(1==(n=3==t||4==t||5==t?/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/:12==t?/^[A-Za-z0-9]{18}$/:0==t?/^[A-Z0-9]{9}$/:1==t?/(^[0-9a-zA-Z]{0,20})$/:2==t?1:/^[0-9A-Z]+$/)){n=/(^[A-Z0-9]{15})$|(^[A-Z0-9]{18})$|(^[A-Z0-9]{20})$/;var i=/^\+?[1-9][0-9]*$/;if(!n.test(e))return Object(a.Toast)("证件号码格式不正确!"),!1;if(15==e.length&&!i.test(e.substring(0,5)))return Object(a.Toast)("证件号码格式不正确!"),!1}else if(!n.test(e))return Object(a.Toast)("证件号码格式不正确!"),!1;return!0},ChooseType:function(){this.isReal||(this.isShow=!0)},setType:function(){this.isShow=!1;var e=this.$refs.picker1.getValues()[0];e&&(this.form.lisenceTypeName=e.name,this.form.lisenceType=e.id,0!=e.id&&1!=e.id&&2!=e.id&&(this.form.organizaName=""))},watchForm:function(){var e=this;this.unWatchFun=this.$watch("form",function(t,n){e.$store.commit(s.u,{lisenceTemp:e.form})},{deep:!0})},checkForm:function(){if(0==this.form.lisenceType||1==this.form.lisenceType||2==this.form.lisenceType){if(!this.form.organizaName.trim())return Object(a.Toast)("机构名称不能为空!"),!1;if(!this.validatejgNameInput())return!1}return this.form.operator.trim()?!!this.validateNameInput()&&(this.form.phone.trim()?/^1[3|4|5|6|7|8|9][0-9]{9}$/.test(this.form.phone.trim())?this.form.lisenceCode.trim()?this.form.lisenceCode.trim().length<6?(Object(a.Toast)("证件号码请至少输入六位!"),!1):!!this.validateCodeInput()&&(this.form.lisenceAddress?this.form.detail.trim()?this.form.detail.trim().length>128?(Object(a.Toast)("详细地址过长，不能超过128个汉字!"),!1):!this.subing:(Object(a.Toast)("请输入详细地址!"),!1):(Object(a.Toast)("请选择省市区!"),!1)):(Object(a.Toast)("证件号码不能为空!"),!1):(Object(a.Toast)("请输入正确的手机号码"),!1):(Object(a.Toast)("手机号码不能为空!"),!1)):(Object(a.Toast)("证件姓名不能为空!"),!1)},saveInfo:function(){var e=this;if(this.checkForm()){var t=this.form.lisenceAddress.split("-");if(void 0==t[2])return void Object(a.Toast)("请选择区");if(this.unWatchFun&&this.unWatchFun(),!this.subing){this.subing=!0;var n=this.$store.state.areaData;if(n&&"null"!=n){var i={openId:this.urlObj.openId,organizaName:this.form.organizaName.trim(),operator:this.form.operator.trim(),phone:this.form.phone.trim(),lisenceCode:this.form.lisenceCode.trim(),lisenceType:this.form.lisenceType,provinceId:n.basRegionVoList.filter(function(e){return e.areaName==t[0]})[0].qkAreaId,cityId:n.cityVoList.filter(function(e){return e.areaName==t[1]})[0].qkAreaId,countyId:n.districtVoList.filter(function(e){return e.areaName==t[2]})[0].qkAreaId,lisenceAddress:this.form.lisenceAddress,detail:this.form.detail.trim()};console.log(i),this.$ajax.post(r.a.createRealName,i,!0).then(function(t){setTimeout(function(){e.subing=!1},1e3),e.$store.commit(s.t,{lisenceObj:t}),e.$store.commit(s.u,{lisenceTemp:""}),e.fromLogin?e.$router.replace({name:e.$route.query.fromlogin}):setTimeout(function(){e.$router.replace(e.$store.state.loginBack)},300)}).catch(function(t){Object(a.Toast)(t.message||"服务繁忙,请稍后重试"),setTimeout(function(){e.subing=!1},1e3)})}}}}}},d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"real-name"},[n("div",{staticClass:"real-wrap",class:{zIndex:e.isFocusInput}},[n("ul",{staticClass:"real-content"},[n("li",{staticClass:"real-list clearfix",on:{click:e.ChooseType}},[n("span",{staticClass:"fl"},[e._v("证件类型")]),e._v(" "),n("div",{staticClass:"fr"},[n("span",{domProps:{textContent:e._s(e.form.lisenceTypeName)}}),e._v(" "),e.isReal?e._e():n("svg",{staticClass:"icono icon-rt",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#icon-youjiantou1"}})])])]),e._v(" "),0==e.form.lisenceType||1==e.form.lisenceType||2==e.form.lisenceType?n("li",{staticClass:"real-list clearfix"},[n("span",{staticClass:"fl"},[e._v("机构名称")]),e._v(" "),n("div",{staticClass:"fr"},[e.isReal?n("div",{staticClass:"form-scroll"},[n("span",{domProps:{textContent:e._s(e.form.organizaName)}})]):n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.organizaName,expression:"form.organizaName"}],attrs:{type:"text",placeholder:"请填写工商注册的机构名称",maxlength:"32"},domProps:{value:e.form.organizaName},on:{input:function(t){t.target.composing||e.$set(e.form,"organizaName",t.target.value)}}})])]):e._e(),e._v(" "),n("li",{staticClass:"real-list clearfix"},[n("span",{staticClass:"fl"},[e._v("姓名")]),e._v(" "),n("div",{staticClass:"fr"},[e.isReal?n("span",{domProps:{textContent:e._s(e.form.operator)}}):n("input",{directives:[{name:"blur",rawName:"v-blur"},{name:"model",rawName:"v-model",value:e.form.operator,expression:"form.operator"}],attrs:{type:"text",placeholder:"请填写证件姓名",id:"operator",maxlength:"16"},domProps:{value:e.form.operator},on:{input:function(t){t.target.composing||e.$set(e.form,"operator",t.target.value)}}})])]),e._v(" "),n("li",{staticClass:"real-list clearfix"},[n("span",{staticClass:"fl"},[e._v("手机号码")]),e._v(" "),n("div",{staticClass:"fr"},[n("span",{domProps:{textContent:e._s(e.form.phone)}})])]),e._v(" "),n("li",{staticClass:"real-list clearfix"},[n("span",{staticClass:"fl"},[e._v("证件号码")]),e._v(" "),n("div",{staticClass:"fr"},[e.isReal?n("span",{domProps:{textContent:e._s(e.form.lisenceCode)}}):n("input",{directives:[{name:"blur",rawName:"v-blur"},{name:"model",rawName:"v-model",value:e.form.lisenceCode,expression:"form.lisenceCode"}],attrs:{type:"text",placeholder:"请填写证件号码",maxlength:"35"},domProps:{value:e.form.lisenceCode},on:{focus:function(t){e.isFocusInput=!0},blur:function(t){e.isFocusInput=!1},input:function(t){t.target.composing||e.$set(e.form,"lisenceCode",t.target.value)}}})])]),e._v(" "),n("li",{staticClass:"real-list clearfix"},[n("span",{staticClass:"fl"},[e._v("证件地址")]),e._v(" "),e.isReal?n("div",{domProps:{textContent:e._s(e.form.lisenceAddress)}}):n("div",{staticClass:"fr choose-area"},[n("area-ctrl",{model:{value:e.form.lisenceAddress,callback:function(t){e.$set(e.form,"lisenceAddress",t)},expression:"form.lisenceAddress"}}),e._v(" "),n("svg",{staticClass:"icono icon-rt",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#icon-youjiantou1"}})])],1)]),e._v(" "),n("li",{staticClass:"real-list clearfix"},[n("span",{staticClass:"fl"},[e._v("详细地址")]),e._v(" "),n("div",{staticClass:"fr"},[e.isReal?n("div",{staticClass:"form-scroll"},[n("span",{domProps:{textContent:e._s(e.form.detail)}})]):n("textarea",{directives:[{name:"blur",rawName:"v-blur"},{name:"model",rawName:"v-model",value:e.form.detail,expression:"form.detail"}],staticClass:"f-input",attrs:{maxlength:"128",placeholder:"请填写证件详细地址"},domProps:{value:e.form.detail},on:{focus:function(t){e.isFocusInput=!0},blur:function(t){e.isFocusInput=!1},input:function(t){t.target.composing||e.$set(e.form,"detail",t.target.value)}}})])])]),e._v(" "),n("mt-popup",{attrs:{position:"bottom",closeOnClickModal:!1},model:{value:e.isShow,callback:function(t){e.isShow=t},expression:"isShow"}},[n("div",{staticClass:"liscence-header"},[n("div",{staticClass:"close-btn",on:{click:function(t){e.isShow=!1}}},[n("svg",{staticClass:"icono",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#icon-cancel2"}})])]),e._v(" "),n("div",{staticClass:"title"},[e._v("证件类型")]),e._v(" "),n("div",{staticClass:"ok-btn",on:{click:e.setType}},[e._v("确定")])]),e._v(" "),n("mt-picker",{ref:"picker1",attrs:{slots:e.slots,"value-key":"name"}})],1)],1),e._v(" "),e.isReal?e._e():n("footer",{staticClass:"pop-btm",class:{btnHt:e.isFocusInput}},[n("mt-button",{staticClass:"btn",attrs:{type:"primary",size:"large",disabled:e.subing},nativeOn:{click:function(t){return e.saveInfo(t)}}},[e._v("确 定")])],1)])},f=[],p={render:d,staticRenderFns:f},u=p,h=n("Mz/3"),b=i,g=h(m,u,!1,b,null,null);t.default=g.exports},G40i:function(e,t,n){t=e.exports=n("yKCJ")(!1),t.push([e.i,'\n@charset "UTF-8";\n/*颜色组*/\n/*字号组*/\n.f16 {\n  font-size: 16px;\n}\n/*rem px转换*/\n/*  @include padding(30,20,10,10);\n*/\nhtml,\nbody {\n  height: 100%;\n}\n.real-name {\n  height: 100%;\n  background: #f2f7f8;\n}\n.real-name .mint-popup {\n    width: 100%;\n}\n.real-name .real-content {\n    padding: 0.42667rem 0.53333rem;\n}\n.real-name .real-content .real-list {\n      margin: 0 0 0.58667rem;\n      background: #fff;\n      border-radius: 5px;\n      -webkit-box-shadow: 0 1px 7px #ddd;\n              box-shadow: 0 1px 7px #ddd;\n      padding: 0 0.53333rem;\n      height: 2.66667rem;\n      line-height: 2.66667rem;\n      -webkit-box-sizing: border-box;\n              box-sizing: border-box;\n}\n.real-name .real-content .real-list .fl {\n        width: 30%;\n}\n.real-name .real-content .real-list .fr {\n        width: 70%;\n        position: relative;\n        height: 100%;\n}\n.real-name .real-content .real-list .fr .form-scroll {\n          height: 100%;\n}\n.real-name .real-content .real-list .fr .form-scroll span {\n            line-height: 18px;\n            position: absolute;\n            top: 50%;\n            -webkit-transform: translateY(-50%);\n                    transform: translateY(-50%);\n            overflow-x: hidden;\n            overflow: auto;\n            width: 100%;\n            max-height: 100%;\n            padding: 5px 0;\n            -webkit-box-sizing: border-box;\n                    box-sizing: border-box;\n            word-break: break-all;\n}\n.real-name .real-content .real-list .fr .icon-rt {\n          font-size: 1.28rem;\n          color: #999999;\n          position: absolute;\n          right: 0;\n          top: 0.69333rem;\n}\n.real-name .real-content .real-list .fr input {\n          padding: 0.53333rem 0.64rem 0.53333rem 0;\n          margin-bottom: 0;\n          border: none;\n          -webkit-box-sizing: border-box;\n                  box-sizing: border-box;\n          height: 2.45333rem;\n          color: #333333;\n          font-size: 14px;\n}\n.real-name .real-content .real-list .fr.choose-area {\n          height: 100%;\n}\n.real-name .real-content .real-list .fr.choose-area .pick-ctrl {\n            display: -webkit-box;\n            display: -ms-flexbox;\n            display: flex;\n            -webkit-box-align: center;\n                -ms-flex-align: center;\n                    align-items: center;\n            height: 100%;\n}\n.real-name .real-content .real-list .fr.choose-area .pick-ctrl .bind-value {\n              width: 90%;\n              line-height: 18px;\n              color: #333333;\n}\n.real-name .real-content .real-list .fr .f-input {\n          outline: none;\n          resize: none;\n          border: none;\n          background: none;\n          padding: 0.85333rem 0.64rem 0 0;\n          width: 100%;\n          -webkit-box-sizing: border-box;\n                  box-sizing: border-box;\n          height: 2.66667rem;\n          font-size: 14px;\n          color: #333333;\n}\n.real-name .real-content .real-list .fr .f-input::-webkit-input-placeholder {\n            /* WebKit browsers */\n            color: #999999;\n}\n.real-name .real-content .real-list .fr .f-input:-moz-placeholder {\n            /* Mozilla Firefox 4 to 18 */\n            color: #999999;\n}\n.real-name .real-content .real-list .fr .f-input::-moz-placeholder {\n            /* Mozilla Firefox 19+ */\n            color: #999999;\n}\n.real-name .real-content .real-list .fr .f-input:-ms-input-placeholder {\n            /* Internet Explorer 10+ */\n            color: #999999;\n}\n.real-name .liscence-header {\n    width: 100%;\n    line-height: 2.66667rem;\n    position: relative;\n    background: #eee;\n}\n.real-name .liscence-header .close-btn {\n      position: absolute;\n      padding: 0 1.06667rem;\n}\n.real-name .liscence-header .close-btn .icono {\n        font-size: 0.64rem;\n}\n.real-name .liscence-header .title {\n      text-align: center;\n}\n.real-name .liscence-header .ok-btn {\n      position: absolute;\n      top: 0;\n      right: 0;\n      padding: 0 10px;\n      color: #5b198b;\n}\n.real-name .pop-btm {\n    padding: 0.91rem;\n    -webkit-box-sizing: border-box;\n            box-sizing: border-box;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: end;\n        -ms-flex-align: end;\n            align-items: flex-end;\n    z-index: 1;\n}\n.real-name .pop-btm .btn {\n      background-image: linear-gradient(135deg, #a85bee 0%, #6074df 100%);\n      height: 2rem;\n      line-height: 2rem;\n      padding: 0;\n      border-radius: 1rem;\n}\n.real-name .btnHt {\n    height: 100%;\n}\n.real-name .zIndex {\n    z-index: 2;\n    position: relative;\n}\n.real-name .pick-ctrl {\n    font-size: 14px !important;\n}\n.real-name .pick-ctrl .picker-box {\n      z-index: 10 !important;\n}\n',""])},NFEZ:function(e,t,n){var i=n("G40i");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n("bUva")("f801efda",i,!0,{})}});